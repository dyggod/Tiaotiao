{"remainingRequest":"F:\\dyg\\myproject\\film\\vue_app\\node_modules\\babel-loader\\lib\\index.js!F:\\dyg\\myproject\\film\\vue_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\dyg\\myproject\\film\\vue_app\\src\\components\\film\\cinemaDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\dyg\\myproject\\film\\vue_app\\src\\components\\film\\cinemaDetail.vue","mtime":1561800728000},{"path":"F:\\dyg\\myproject\\film\\vue_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"F:\\dyg\\myproject\\film\\vue_app\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"F:\\dyg\\myproject\\film\\vue_app\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//引入titlebar\nimport titlebar from \"./common/titlebar\"; //引入times\n\nimport times from \"./common/times\";\nexport default {\n  data: function data() {\n    return {\n      active: false,\n      cDetail: {\n        cid: '',\n        title: '',\n        position: ''\n      },\n      //影院信息\n      fDetail: [],\n      //电影信息\n      onshow: 0,\n      fid: '' //电影id\n\n    };\n  },\n  methods: {\n    //1.点击电影图片时放大\n    scale: function scale(n) {\n      this.onshow = n; //让下方对应电影信息显示\n      //console.log(n, this.$refs)\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.$refs.wrapper[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var el = _step.value;\n          //初始化时遍历每一个加了ref的元素\n          el.setAttribute('class', 'swiper-slide'); //设置原本样式\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.$refs.wrapper[n].setAttribute('class', 'swiper-slide actived'); //取出点击的元素,加上放大样式\n      // console.log(111);\n\n      if (n >= 3) {\n        //当点击每个li时,根据不同情况 移动margin-left\n        var moved = (n - 2) * 4;\n        this.$refs.swipper.style.marginLeft = -moved + 'rem';\n      } else if (n == 2) {\n        this.$refs.swipper.style.marginLeft = 0 + 'rem';\n      } else if (n == 1) {\n        this.$refs.swipper.style.marginLeft = '4rem';\n      } else if (n == 0) {\n        this.$refs.swipper.style.marginLeft = '8rem';\n      }\n    },\n    //2.获取影院,电影数据\n    onload: function onload() {\n      var _this = this;\n\n      var cid = this.$route.params.cid;\n      var fid = this.$route.params.fid;\n      this.fid = fid;\n      var url = \"/cinemaDetail\";\n      var obj = {\n        cid: cid\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (result) {\n        //console.log(result.data[0]);\n        _this.cDetail = result.data[0];\n        _this.cName = _this.cDetail.title;\n      });\n      this.axios.get('/filmlist', {\n        params: ''\n      }).then(function (result) {\n        //console.log(result);\n        _this.fDetail = result.data.data;\n      });\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //1.页面一加载就拿到页面fid\n    //console.log(this.$route.params.fid)\n    if (this.$route.params.fid == \"undefined\") {\n      //先判断是否有params中有fid(当从影院列表直接进入影院详情时)\n      this.$route.params.fid = 1; //如果没有,接赋值为1\n    }\n\n    var fid = this.$route.params.fid;\n    this.fid = fid;\n    this.onshow = this.fid - 1; //将显示初始值给onshow,让它优先显示      \n    //console.log(this.onshow)\n\n    this.onload();\n    3.; //显示页面前显示个刷新提示\n\n    this.$indicator.open('加载中...'); //2..设置定时器\n\n    setTimeout(function () {\n      //设置一个定时器,页面元素加载完成后,让对应fid电影显示\n      _this2.scale(_this2.onshow);\n\n      _this2.$indicator.close();\n    }, 100);\n  },\n  components: {\n    titlebar: titlebar,\n    times: times\n  }\n};",{"version":3,"sources":["cinemaDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"cinemaDetail\" style=\"position:relative\">\r\n        <titlebar :title=\"cDetail.title\" :back=\"true\"></titlebar>\r\n        <div class=\"cinema\">\r\n            <!-- 背景 -->\r\n            <div class=\"bg\" ></div>\r\n            <!-- 遮罩层 -->\r\n            <div class=\"mask\"></div>\r\n            <div class=\"cinema-head\">\r\n                <div class=\"cinema-info\">\r\n                    <p>{{cDetail.title}}</p>\r\n                    <span>{{cDetail.position}}</span>\r\n                </div>\r\n                <div class=\"gps\">\r\n                    <img src=\"../../assets/dingwei.png\" alt=\"\">\r\n                </div>\r\n            </div>\r\n            <div class=\"cinema-block\">\r\n                <!-- 滑动图 -->\r\n                <div class=\"swiper-container\">\r\n                    <ul class=\"swiper-wrapper\" ref=\"swipper\">\r\n                        <li  ref=\"wrapper\" class=\"swiper-slide\" :class=\"active?'actived':''\"  v-for=\"(item,index) of fDetail\" :key=\"index\" @click=\"scale(index)\">\r\n                            <img :src=\"item.img\" alt=\"\">    \r\n                        </li>   \r\n                    </ul>\r\n                </div>\r\n                <!-- 电影介绍 -->\r\n                <div class=\"film-info\"  v-for=\"(item,index) of fDetail\" :key=\"index\" v-show=\"index==onshow\" >\r\n                    <div>\r\n                        <span>{{item.title}}</span>\r\n                        <span>{{item.score}}</span>\r\n                        <span>分</span>\r\n                    </div>\r\n                    <div>\r\n                        125分钟&nbsp;|&nbsp;{{item.point}}&nbsp;|&nbsp;{{item.player}}&nbsp;| \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- 场次列表组件 -->\r\n            <times :fid=\"fid\" :cid=\"cDetail.cid\" ></times>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n//引入titlebar\r\nimport titlebar from \"./common/titlebar\"\r\n//引入times\r\nimport times from \"./common/times\"\r\nexport default {\r\n    data(){\r\n        return{\r\n            active:false,\r\n            cDetail:{cid:'',title:'',position:''},  //影院信息\r\n            fDetail:[],  //电影信息\r\n            onshow:0,\r\n            fid:''      //电影id\r\n        }\r\n    },\r\n    methods:{\r\n        //1.点击电影图片时放大\r\n        scale(n){\r\n            this.onshow=n;  //让下方对应电影信息显示\r\n            //console.log(n, this.$refs)\r\n            for(var el of this.$refs.wrapper){  //初始化时遍历每一个加了ref的元素\r\n                el.setAttribute('class','swiper-slide')  //设置原本样式\r\n            }\r\n            this.$refs.wrapper[n].setAttribute('class','swiper-slide actived'); //取出点击的元素,加上放大样式\r\n           // console.log(111);\r\n            if(n>=3){  //当点击每个li时,根据不同情况 移动margin-left\r\n                var moved=(n-2)*4;\r\n                this.$refs.swipper.style.marginLeft=-moved+'rem';\r\n            }else if(n==2){\r\n                this.$refs.swipper.style.marginLeft=0+'rem';\r\n            }else if(n==1){\r\n                this.$refs.swipper.style.marginLeft='4rem';\r\n            }else if(n==0){\r\n                 this.$refs.swipper.style.marginLeft='8rem';\r\n            }\r\n            \r\n        },\r\n        //2.获取影院,电影数据\r\n        onload(){\r\n            var cid=this.$route.params.cid;\r\n            var fid=this.$route.params.fid;\r\n            this.fid=fid;\r\n            var url=\"/cinemaDetail\";\r\n            var obj={cid:cid}\r\n            this.axios.get(url,{params:obj}).then(result=>{\r\n                //console.log(result.data[0]);\r\n                this.cDetail=result.data[0];\r\n                this.cName=this.cDetail.title\r\n            });\r\n            this.axios.get('/filmlist',{params:''}).then(result=>{\r\n                //console.log(result);\r\n                this.fDetail=result.data.data;\r\n            });   \r\n        }     \r\n    },\r\n    created(){\r\n        //1.页面一加载就拿到页面fid\r\n        //console.log(this.$route.params.fid)\r\n        if(this.$route.params.fid==\"undefined\"){ //先判断是否有params中有fid(当从影院列表直接进入影院详情时)\r\n            this.$route.params.fid=1  //如果没有,接赋值为1\r\n        }\r\n        var fid=this.$route.params.fid;\r\n        this.fid=fid;\r\n        this.onshow=this.fid-1  //将显示初始值给onshow,让它优先显示      \r\n        //console.log(this.onshow)\r\n        this.onload();\r\n        3.//显示页面前显示个刷新提示\r\n        this.$indicator.open('加载中...')\r\n        //2..设置定时器\r\n        setTimeout(()=>{//设置一个定时器,页面元素加载完成后,让对应fid电影显示\r\n            this.scale(this.onshow);\r\n            this.$indicator.close();\r\n        },100);\r\n        \r\n    },\r\n    components:{\r\n        titlebar,\r\n        times\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    /* bg */\r\n    div.bg{\r\n        width: 100%;\r\n        height: 8.5rem;\r\n         /* padding: 1rem 2rem 1rem 1rem;  */\r\n         background: url('../../assets/movie1.jpg');\r\n         background-size:cover;\r\n         position: absolute;\r\n         filter:blur(10px);\r\n         opacity: 0.5;\r\n         top:8rem;\r\n    }\r\n    div.mask{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 8.5rem;\r\n        /* padding: 1rem 2rem 1rem 1rem;  */\r\n        background-color:#333;\r\n        top: 8rem;\r\n        left:0;\r\n        z-index: -1;\r\n    }\r\n\r\n\r\n    /* div.cinema-head*/\r\n    div.cinema-head{\r\n        display: flex;\r\n        position: relative;\r\n        padding: 1rem 6rem 1rem 1rem;\r\n    }\r\n    div.cinema-info{\r\n        width: 15rem;\r\n        height: 3rem;\r\n       \r\n    }\r\n    div.cinema-info p{\r\n        margin: 0;\r\n        font-size: 17px;\r\n        line-height: 24px;\r\n        font-weight: 700;\r\n        color: #333;\r\n    }\r\n    div.cinema-info span{\r\n        margin-top: 2px;\r\n        font-size: 13px;\r\n        line-height: 18.5px;\r\n        color: #999;\r\n        white-space: nowrap;\r\n    }\r\n    div.gps{\r\n        position: absolute;\r\n        right: 0;\r\n        top: 30%;\r\n        width: 70px;\r\n        height: 31px;\r\n        border-left: 1px solid #d8d8d8;\r\n        text-align: center;\r\n    }\r\n    div.gps img{\r\n        display: inline-block;\r\n        width: 19px;\r\n        height: 22px;\r\n        margin-top: 5px;\r\n    }\r\n    /* div.cinema-block */\r\n    div.swiper-container{\r\n        height: 8.5rem;\r\n        /* background: #f0f; */\r\n        overflow: hidden;\r\n    }\r\n    ul.swiper-wrapper{\r\n        width:100rem;\r\n        height: 100%;\r\n        position: relative;\r\n        display: flex;\r\n        box-sizing: content-box;\r\n        list-style: none;\r\n        margin: 0;\r\n        align-items: center;\r\n        padding-left: 0;\r\n    }\r\n    \r\n    ul>li.swiper-slide{\r\n        width: 4rem;\r\n        height: 6rem;\r\n        background-color: red;\r\n        margin-left: 0.6rem;\r\n       \r\n    }\r\n    ul>li.swiper-slide img{\r\n        width: 100%;height: 100%;\r\n    }\r\n    li.actived{\r\n        transform: scale(1.2);\r\n        transition: all 1.5s;\r\n    }\r\n         /* film-info */\r\n    div.film-info{\r\n        display: flex;\r\n        flex-flow: column;\r\n        align-items: center;\r\n        height: 3rem;\r\n        padding: 0.7rem 1rem 0.7rem 1rem;\r\n    }\r\n     div.film-info>div:first-child>span{\r\n         color: #ffb400;\r\n         font-size: 16px;\r\n         font-weight: bolder;\r\n     }\r\n     div.film-info>div:first-child>span:last-child{\r\n         font-size: 10px;\r\n     }\r\n    div.film-info>div:first-child>span:first-child{\r\n        line-height: 24px;\r\n        font-size: 17px;\r\n        color: #333;\r\n        font-weight: 700;\r\n        margin-right: 1rem;\r\n    }\r\n    div.film-info>div:last-child{\r\n        margin-top: 2px;\r\n        height: 18.5px;\r\n        line-height: 18.5px;\r\n        font-size: 13px;\r\n        color: #999;\r\n       \r\n    }\r\n</style>\r\n"],"sourceRoot":"src\\components\\film"}]}